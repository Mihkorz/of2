{% extends "base_profiles.html" %}

{% block title %}TEST | OncoFinder v2.0{% endblock %}

{% block content %}
<div class="container">

<h1>Testing Playground</h1>


{{pathways|length}}
<table border="1">
<tr>
{%for path in pathways %}

<td>{{path.name}}</td>

{%endfor%}
</tr>
<tr>
{%for path in pathways %}
<td valign="top"> 
<table border=1>
{%for gene in path.gene_set.all%}

 <tr><td>
 {{gene.name}}
 </td></tr>
 
 {%endfor%}
</table>
</td>
  {%endfor%}
</tr>
</table>



</div>

<script type="text/javascript">



$(function(){
	
	
	var PollState = function(task) {
		
		$.ajax({
			type: "POST",
			url: "/task_status/",
			data: {
				   task_id: task
				   }
		}).fail(function(event, jqxhr, settings, thrownError ) {
			  alert( jqxhr + settings );})
		.done(function(data){ console.log(data);
		                      if(data['state']!="SUCCESS"){
		                    	  console.log(data['state']);
		                    	  setTimeout(function(){PollState(task);}, 10000);
		                      }
		                      else {
		                    	  console.log(data['state'] + " Task done!!!");
		                      }
		                      
		});
		
		
	
	}
	
	//PollState("{{task_id}}");
	
	testfunc = function(txt){
		var dt = new Date();
		var time = dt.getHours() + ":" + dt.getMinutes() + ":" + dt.getSeconds()
		console.log(time + txt);
		setTimeout(function(){testfunc(txt);}, 5000);
		
	}
	//testfunc("maza fakkka")
	
	
});


</script>

{%endblock%}